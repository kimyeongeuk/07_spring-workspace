<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">


	<resultMap type="boardDto" id="boardResultMap">
		<result column="BOARD_NO" property="boardNo"/>
		<result column="BOARD_TITLE" property="boardTitle"/>
		<result column="BOARD_WRITER" property="boardWriter"/>
		<result column="BOARD_CONTENT" property="boardContent"/>
		<result column="COUNT" property="count"/>
		<result column="REGIST_DATE" property="registDate"/>
		<result column="status" property="status" />
		<result column="attach_count" property="attachCount" />
	</resultMap>




	<select id="selectBoardListCount" resultType="_int">
		select
						count(*)
			from	board
		 where	status = 'Y'
	
	</select>

	<select id="selectBoardList" resultMap="boardResultMap">
		select
		        board_no
		     ,  board_title
		     ,  user_id
		     ,  count
		     ,  to_char(regist_date,'YYYY-MM-DD') as regist_date
		     ,  (
		            select count(*)
		              from attachment
		             where ref_type = 'B'
		               and ref_no = b.board_no
		        ) as attach_count
		  from  board b
		  join  member on (user_no = board_writer)
		 where  b.status = 'Y'
		 order by board_no desc
	</select>


</mapper>
